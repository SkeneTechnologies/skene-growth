name = "chatwoot"
description = "Open-source omnichannel customer support platform with live chat, email, social media, and API channels"

# --- Tech Stack ---
[tech_stack]
framework = "Rails"
language = "Ruby"
database = "PostgreSQL"
auth = "Devise"
deployment = "Docker"
package_manager = "pnpm"
services = ["Stripe", "Twilio", "Slack", "Amplitude", "Sentry", "OpenAI", "Shopify"]

# --- Industry Classification ---
[industry]
primary = "Customer Support"
acceptable_alternatives = ["SaaS", "Communication"]
expected_tags = ["B2B", "SaaS", "Open Source", "Enterprise"]

# --- Expected Features ---

[[expected_features]]
name = "billing"
description = "Stripe subscriptions with tiered plans (Hacker, Startups, Business, Enterprise), billing portal, and AI credit top-up purchases"
file_patterns = ["billing", "stripe", "enterprise/billing"]
keywords = ["billing", "subscription", "stripe", "payment", "plan", "pricing"]

[[expected_features]]
name = "authentication"
description = "Devise-based auth with token auth API, Google OAuth, SAML SSO, two-factor authentication (TOTP), email confirmation, and password reset"
file_patterns = ["devise_overrides", "omniauth", "saml", "sessions_controller"]
keywords = ["authentication", "login", "signup", "oauth", "sso", "saml", "2fa", "two-factor"]

[[expected_features]]
name = "team_management"
description = "Agent invitation system with bulk invite, team creation and member management, and enterprise custom roles with granular permissions"
file_patterns = ["agent_builder", "team_members", "teams", "custom_roles"]
keywords = ["team", "invitation", "invite", "agent", "role", "member", "collaboration"]

[[expected_features]]
name = "analytics"
description = "Amplitude event tracking on the frontend plus built-in reporting dashboards for conversations, agents, teams, CSAT, SLA, and bot performance"
file_patterns = ["AnalyticsHelper", "reports", "amplitude"]
keywords = ["analytics", "tracking", "reports", "metrics", "dashboard", "amplitude"]

[[expected_features]]
name = "onboarding"
description = "Guided onboarding flow for new accounts with step-by-step setup including inbox creation, team invites, and feature introduction cards"
file_patterns = ["onboarding", "OnboardingView", "OnboardingStep"]
keywords = ["onboarding", "setup", "welcome", "getting started"]

[[expected_features]]
name = "notifications"
description = "Multi-channel notification system with email notifications via mailers, browser push via web-push, mobile push via FCM, and in-app notification center"
file_patterns = ["mailers", "notification", "fcm_service", "push_notification"]
keywords = ["notification", "email", "push", "mailer", "fcm"]

[[expected_features]]
name = "feature_gating"
description = "Plan-based feature flags controlling access to premium features (SLA, Captain AI, custom roles, audit logs, SAML) with paywall modal for upgrade prompts"
file_patterns = ["featurable", "featureFlags", "plan_usage_and_limits", "BasePaywallModal"]
keywords = ["feature flag", "feature gating", "paywall", "premium", "upgrade", "plan", "limits"]

[[expected_features]]
name = "webhooks"
description = "Outbound webhook system allowing users to configure HTTP callbacks for conversation, message, contact, and inbox events with per-webhook secrets"
file_patterns = ["webhook_listener", "webhooks_controller", "webhook"]
keywords = ["webhook", "callback", "event"]

[[expected_features]]
name = "campaigns"
description = "Outbound campaign system supporting live chat (ongoing), SMS, and WhatsApp (one-off) campaigns with audience targeting by labels, Liquid template personalization, and async job execution"
file_patterns = ["campaign", "campaigns_controller", "campaign_listener", "oneoff_sms_campaign"]
keywords = ["campaign", "outbound", "sms", "whatsapp", "audience", "broadcast"]

[[expected_features]]
name = "audit_logging"
description = "Enterprise audit trail tracking changes to accounts, users, teams, inboxes, webhooks, automations, and conversations via the audited gem, with admin UI and feature-flag gating"
file_patterns = ["audit_log", "audit_logs_controller", "auditlogs"]
keywords = ["audit", "audit log", "change tracking", "compliance"]

[[expected_features]]
name = "captain_ai"
description = "Enterprise AI assistant (Captain) with document knowledge base, scenario workflows, custom tools, copilot chat for agents, and LLM-powered response generation via RubyLLM with usage-metered credits"
file_patterns = ["captain/assistant", "captain/document", "captain/scenario", "captain/copilot", "captain/custom_tool"]
keywords = ["ai", "captain", "assistant", "copilot", "llm", "ai agent", "knowledge base"]

[[expected_features]]
name = "sla_policies"
description = "Enterprise SLA policy engine with configurable first-response, next-response, and resolution time thresholds, automatic evaluation via background jobs, SLA event tracking, and violation notifications"
file_patterns = ["sla_policy", "applied_sla", "sla_event", "evaluate_applied_sla"]
keywords = ["sla", "service level", "response time", "resolution time", "threshold"]

[[expected_features]]
name = "help_center"
description = "Self-service knowledge base with portals, categorized articles (draft/published/archived), multi-locale support, full-text search, custom domains, and public-facing portal API"
file_patterns = ["portal", "article", "portals_controller", "articles_controller", "helpcenter"]
keywords = ["help center", "knowledge base", "portal", "article", "self-service", "documentation"]

[[expected_features]]
name = "automation_rules"
description = "Event-driven automation engine with configurable triggers (conversation created/updated/resolved, message created), condition matching, and actions (assign agent/team, send message, add label, change status, send webhook, add SLA)"
file_patterns = ["automation_rule", "automation_rules_controller", "automation_rule_listener", "action_service"]
keywords = ["automation", "rule", "trigger", "workflow", "condition", "action"]

# --- Notable Files ---
notable_files = [
    "Gemfile",
    "package.json",
    "config/initializers/stripe.rb",
    "enterprise/app/services/enterprise/billing/handle_stripe_event_service.rb",
    "enterprise/app/services/enterprise/billing/create_stripe_customer_service.rb",
    "enterprise/app/controllers/enterprise/webhooks/stripe_controller.rb",
    "app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue",
    "app/controllers/devise_overrides/sessions_controller.rb",
    "app/controllers/devise_overrides/omniauth_callbacks_controller.rb",
    "enterprise/app/controllers/api/v1/accounts/saml_settings_controller.rb",
    "app/builders/agent_builder.rb",
    "app/controllers/api/v1/accounts/teams_controller.rb",
    "enterprise/app/models/custom_role.rb",
    "app/javascript/dashboard/helper/AnalyticsHelper/index.js",
    "app/javascript/dashboard/routes/dashboard/settings/reports/Index.vue",
    "app/javascript/dashboard/components/widgets/conversation/OnboardingView.vue",
    "app/mailers/agent_notifications/conversation_notifications_mailer.rb",
    "app/services/notification/push_notification_service.rb",
    "app/services/notification/fcm_service.rb",
    "app/models/concerns/featurable.rb",
    "app/javascript/dashboard/featureFlags.js",
    "enterprise/app/models/enterprise/account/plan_usage_and_limits.rb",
    "app/javascript/dashboard/routes/dashboard/settings/components/BasePaywallModal.vue",
    "app/listeners/webhook_listener.rb",
    "app/controllers/api/v1/accounts/webhooks_controller.rb",
    "app/models/campaign.rb",
    "app/controllers/api/v1/accounts/campaigns_controller.rb",
    "app/listeners/campaign_listener.rb",
    "app/services/twilio/oneoff_sms_campaign_service.rb",
    "enterprise/app/models/enterprise/audit_log.rb",
    "enterprise/app/controllers/api/v1/accounts/audit_logs_controller.rb",
    "app/javascript/dashboard/routes/dashboard/settings/auditlogs/Index.vue",
    "enterprise/app/models/captain/assistant.rb",
    "enterprise/app/controllers/api/v1/accounts/captain/assistants_controller.rb",
    "enterprise/app/services/captain/copilot/chat_service.rb",
    "enterprise/app/models/sla_policy.rb",
    "enterprise/app/models/applied_sla.rb",
    "enterprise/app/services/sla/evaluate_applied_sla_service.rb",
    "enterprise/app/controllers/api/v1/accounts/sla_policies_controller.rb",
    "app/models/portal.rb",
    "app/models/article.rb",
    "app/controllers/api/v1/accounts/portals_controller.rb",
    "app/controllers/api/v1/accounts/articles_controller.rb",
    "app/models/automation_rule.rb",
    "app/controllers/api/v1/accounts/automation_rules_controller.rb",
    "app/listeners/automation_rule_listener.rb",
    "app/services/automation_rules/action_service.rb",
]
